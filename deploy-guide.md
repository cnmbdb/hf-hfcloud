# 腾讯云 Pages 部署指南

## 1. 构建配置

项目已配置为适合腾讯云 Pages 部署：

### Vite 配置
- 构建输出目录：`dist`
- 基础路径：`/`（适合根域名部署）
- 静态资源处理：已优化

### 环境变量配置
在腾讯云 Pages 控制台配置以下环境变量：

```
VITE_SUPABASE_URL=your_supabase_project_url
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
```

**重要：** 如果不配置这些环境变量，应用会自动使用回退模式，提供测试账户功能。

## 2. 部署步骤

### 方式一：Git 自动部署（推荐）
1. 将代码推送到 Git 仓库
2. 在腾讯云 Pages 控制台创建项目
3. 连接 Git 仓库
4. 配置构建设置：
   - 构建命令：`npm run build`
   - 输出目录：`dist`
   - Node.js 版本：18.x 或更高

### 方式二：手动上传
1. 本地执行构建：`npm run build`
2. 将 `dist` 目录内容上传到腾讯云 Pages

## 3. 测试账户

部署后可使用以下测试账户登录：
- 用户名：`admin`，密码：`admin123`（超级管理员）
- 用户名：`manager`，密码：`admin123`（管理员）
- 用户名：`user1`，密码：`admin123`（普通用户）

## 4. 故障排除

### 白屏问题
- 已实现回退机制，即使没有 Supabase 配置也能正常运行
- 检查浏览器控制台是否有错误信息
- 确认构建产物正确生成

### 路由问题
- 单页应用需要配置重定向规则
- 在腾讯云 Pages 控制台配置：所有路径重定向到 `/index.html`

### 环境变量问题
- 确保使用 `VITE_` 前缀
- 在腾讯云 Pages 控制台正确配置环境变量
- 重新构建部署以应用新的环境变量

## 5. 性能优化

- 已启用代码分割和懒加载
- 静态资源已优化压缩
- 支持现代浏览器的 ES 模块

## 6. 安全配置

- 生产环境建议配置 HTTPS
- 设置适当的 CSP 头部
- 配置 Supabase RLS 策略（如使用数据库功能）