# 腾讯云 Pages 部署完整指南

## 🚀 快速部署步骤

### 1. 准备工作
- ✅ 代码已推送到 Git 仓库
- ✅ 构建配置已优化（输出到 `dist` 目录）
- ✅ 单页应用路由重定向已配置
- ✅ 回退机制已实现（无需 Supabase 也能运行）

### 2. 腾讯云 Pages 控制台配置

#### 创建项目
1. 登录 [腾讯云 Pages 控制台](https://console.cloud.tencent.com/webify)
2. 点击"新建项目"
3. 选择"从 Git 导入"
4. 连接你的 Git 仓库

#### 构建设置
```
构建命令: npm run build
输出目录: dist
Node.js 版本: 18.x
安装命令: npm install
```

#### 环境变量（可选）
如果需要完整的数据库功能，配置以下环境变量：
```
VITE_SUPABASE_URL=your_supabase_project_url
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
```

**重要提示：** 即使不配置环境变量，应用也能正常运行，会自动使用回退模式。

### 3. 测试账户

部署完成后，可以使用以下测试账户登录：

| 用户名 | 密码 | 角色 |
|--------|------|------|
| admin | admin123 | 超级管理员 |
| manager | admin123 | 管理员 |
| user1 | admin123 | 普通用户 |

### 4. 部署验证

部署完成后，访问分配的域名：
1. ✅ 首页正常加载（不再白屏）
2. ✅ 登录功能正常
3. ✅ 页面路由正常跳转
4. ✅ 所有功能模块可访问

## 🔧 技术配置详情

### 构建优化
- 输出目录：`dist`
- 代码分割：vendor、router、ui 模块分离
- 资源压缩：启用 terser 压缩
- 缓存策略：静态资源长期缓存

### 路由配置
- 单页应用重定向：`/*` → `/index.html`
- 支持 React Router 客户端路由
- 404 页面自动处理

### 回退机制
- 自动检测 Supabase 可用性
- 无数据库时使用本地测试数据
- 确保部署环境稳定运行

## 🛠️ 故障排除

### 常见问题

#### 1. 白屏问题
- ✅ 已解决：实现了完整的回退机制
- 检查：浏览器控制台是否有错误

#### 2. 路由 404
- ✅ 已配置：`public/_redirects` 文件
- 确保：腾讯云 Pages 正确识别重定向规则

#### 3. 环境变量问题
- 使用 `VITE_` 前缀
- 在腾讯云 Pages 控制台正确配置
- 重新部署以应用新变量

#### 4. 构建失败
- 检查 Node.js 版本（推荐 18.x）
- 确认依赖安装完整
- 查看构建日志详细信息

## 📊 性能优化

### 已实现优化
- 代码分割和懒加载
- 静态资源压缩
- 长期缓存策略
- 现代浏览器 ES 模块支持

### 建议配置
- 启用 CDN 加速
- 配置 HTTPS
- 设置适当的缓存头
- 启用 Gzip 压缩

## 🔒 安全配置

### 推荐设置
- 强制 HTTPS 访问
- 配置 CSP 安全策略
- 设置 X-Frame-Options
- 启用 HSTS

### Supabase 安全
- 配置 RLS 策略（如使用数据库）
- 限制 API 访问权限
- 定期更新访问密钥

## 📝 部署检查清单

- [ ] Git 代码已推送
- [ ] 腾讯云 Pages 项目已创建
- [ ] 构建配置正确
- [ ] 环境变量已配置（可选）
- [ ] 首次部署成功
- [ ] 测试账户登录正常
- [ ] 所有页面功能正常
- [ ] 路由跳转正常
- [ ] 移动端适配正常

## 🎯 下一步

1. **域名配置**：绑定自定义域名
2. **监控设置**：配置访问统计和错误监控
3. **性能优化**：根据实际使用情况进一步优化
4. **功能扩展**：根据需求添加新功能模块

---

**部署完成！** 🎉

你的 HFCloud 网站现在已经可以在腾讯云 Pages 上稳定运行了。